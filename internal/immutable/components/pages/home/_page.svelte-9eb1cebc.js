var et=Object.defineProperty;var nt=(o,t,n)=>t in o?et(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var w=(o,t,n)=>(nt(o,typeof t!="symbol"?t+"":t,n),n);import{S as Z,i as Q,s as R,k as v,a as T,q as st,l as k,m as z,h as p,c as D,r as it,n as y,b as H,G as m,J as W,u as ot,f as I,g as $,t as N,d as tt,K as rt,o as at,v as G,w as F,e as J,x as X,y as q,M as lt,N as ct,z as M,L as dt,O as ft,p as C,B as ut,P as ht}from"../../../chunks/index-d928719e.js";/* empty css                          */import{c as mt}from"../../../chunks/shared-23917130.js";function K(o){let t,n,e;const a=[o[2]];var l=o[1];function c(i){let r={};for(let u=0;u<a.length;u+=1)r=ft(r,a[u]);return{props:r}}return l&&(t=G(l,c())),{c(){t&&F(t.$$.fragment),n=J()},l(i){t&&X(t.$$.fragment,i),n=J()},m(i,r){t&&q(t,i,r),H(i,n,r),e=!0},p(i,r){const u=r&4?lt(a,[ct(i[2])]):{};if(l!==(l=i[1])){if(t){$();const h=t;N(h.$$.fragment,1,0,()=>{M(h,1)}),tt()}l?(t=G(l,c()),F(t.$$.fragment),I(t.$$.fragment,1),q(t,n.parentNode,n)):t=null}else l&&t.$set(u)},i(i){e||(t&&I(t.$$.fragment,i),e=!0)},o(i){t&&N(t.$$.fragment,i),e=!1},d(i){i&&p(n),t&&M(t,i)}}}function _t(o){let t,n,e,a,l,c,i,r,u,h,d=o[0].windowName+"",g,x,b,L,P,E,O,U,f=o[1]&&K(o);return{c(){t=v("div"),n=v("div"),e=v("div"),a=v("button"),l=T(),c=v("button"),i=T(),r=v("button"),u=T(),h=v("div"),g=st(d),x=T(),b=v("div"),f&&f.c(),this.h()},l(_){t=k(_,"DIV",{class:!0,style:!0,"data-zindex":!0});var s=z(t);n=k(s,"DIV",{class:!0});var V=z(n);e=k(V,"DIV",{class:!0});var S=z(e);a=k(S,"BUTTON",{class:!0}),z(a).forEach(p),l=D(S),c=k(S,"BUTTON",{class:!0}),z(c).forEach(p),i=D(S),r=k(S,"BUTTON",{class:!0}),z(r).forEach(p),S.forEach(p),u=D(V),h=k(V,"DIV",{class:!0});var B=z(h);g=it(B,d),B.forEach(p),V.forEach(p),x=D(s),b=k(s,"DIV",{});var j=z(b);f&&f.l(j),j.forEach(p),s.forEach(p),this.h()},h(){y(a,"class","w-3 h-3 bg-red-500 rounded-full"),y(c,"class","w-3 h-3 bg-yellow-500 rounded-full"),y(r,"class","w-3 h-3 bg-green-500 rounded-full"),y(e,"class",""),y(h,"class","window-title mx-auto"),y(n,"class","window-header text-gray-100 p-2 flex flex-row"),y(t,"class","window fixed rounded-xl overflow-hidden shadow-lg w-fit h-fit border border-gray-500"),y(t,"style",L=o[0].getStyleString()),y(t,"data-zindex",P=o[0]._zIndex||"1")},m(_,s){H(_,t,s),m(t,n),m(n,e),m(e,a),m(e,l),m(e,c),m(e,i),m(e,r),m(n,u),m(n,h),m(h,g),m(t,x),m(t,b),f&&f.m(b,null),o[14](t),E=!0,O||(U=[W(a,"click",o[9]),W(c,"click",o[10]),W(r,"click",o[11]),W(n,"mousedown",o[12]),W(n,"mouseup",o[13]),W(t,"mousedown",o[15])],O=!0)},p(_,[s]){(!E||s&1)&&d!==(d=_[0].windowName+"")&&ot(g,d),_[1]?f?(f.p(_,s),s&2&&I(f,1)):(f=K(_),f.c(),I(f,1),f.m(b,null)):f&&($(),N(f,1,1,()=>{f=null}),tt()),(!E||s&1&&L!==(L=_[0].getStyleString()))&&y(t,"style",L),(!E||s&1&&P!==(P=_[0]._zIndex||"1"))&&y(t,"data-zindex",P)},i(_){E||(I(f),E=!0)},o(_){N(f),E=!1},d(_){_&&p(t),f&&f.d(),o[14](null),O=!1,rt(U)}}}function gt(o,t,n){let{windowState:e}=t,{frameElement:a=null}=t,{pros:l=null}=t,{destroyFunction:c=()=>{r&&r.remove()}}=t,{stack:i}=t,r,u=0,h=0;function d(s,V){r&&(u=s-r.offsetLeft,h=V-r.offsetTop,document.addEventListener("mousemove",g),b(),document.querySelectorAll(".window").forEach(B=>{B.style.zIndex=B.dataset.zindex}))}function g(s){r&&(s.preventDefault(),n(0,e.x=s.clientX-u,e),n(0,e.y=s.clientY-h,e))}const x=function(s){s.target!==r&&s.target instanceof HTMLElement&&s.target.classList.contains("window")&&n(0,e.zIndex=i.getIndexOf(e)+1,e)},b=function(){n(0,e.zIndex=999,e),document.addEventListener("click",x),i.moveToTop(e)};at(async()=>{r==null||r.setAttribute("data-zIndex",e.zIndex.toString())});const L=function(s){s.stopPropagation(),c()},P=function(s){s.stopPropagation(),n(0,e.state="minimized",e),r==null||r.classList.add("hidden")},E=function(s){s.stopPropagation(),e.state==="maximized"?(n(0,e.state="normal",e),n(0,e.width=e._width,e),n(0,e.height=e._height,e),n(0,e.x=e._x,e),n(0,e.y=e._y,e)):(n(0,e.state="maximized",e),n(0,e._width=e.width,e),n(0,e._height=e.height,e),n(0,e._x=e.x,e),n(0,e._y=e.y,e),n(0,e.width=window.innerWidth,e),n(0,e.height=window.innerHeight,e),n(0,e.x=0,e),n(0,e.y=0,e))},O=function(s){s.stopPropagation(),d(s.clientX,s.clientY)},U=function(s){s.stopPropagation(),document.removeEventListener("mousemove",g)};function f(s){dt[s?"unshift":"push"](()=>{r=s,n(4,r)})}const _=function(s){s.stopPropagation(),b()};return o.$$set=s=>{"windowState"in s&&n(0,e=s.windowState),"frameElement"in s&&n(1,a=s.frameElement),"pros"in s&&n(2,l=s.pros),"destroyFunction"in s&&n(3,c=s.destroyFunction),"stack"in s&&n(8,i=s.stack)},[e,a,l,c,r,d,g,b,i,L,P,E,O,U,f,_]}class Y extends Z{constructor(t){super(),Q(this,t,gt,_t,R,{windowState:0,frameElement:1,pros:2,destroyFunction:3,stack:8})}}class A{constructor(t=720,n=480,e=600,a=300,l=2,c="normal",i="Window"){w(this,"width");w(this,"height");w(this,"x");w(this,"y");w(this,"zIndex");w(this,"state");w(this,"windowName");w(this,"_width");w(this,"_height");w(this,"_x");w(this,"_y");w(this,"_zIndex");this.width=t,this.height=n,this.x=e,this.y=a,this.zIndex=l,this.state=c,this.windowName=i,this._width=t,this._height=n,this._x=e,this._y=a,this._zIndex=l}getStyleString(){return`width: ${this.width}px; height: ${this.height}px; left: ${this.x}px; top: ${this.y}px; z-index: ${this.zIndex};`}}class wt{constructor(t=1/0){w(this,"capacity");w(this,"storage",[]);this.capacity=t}push(t){if(this.size()===this.capacity)throw Error("Stack has reached max capacity, you cannot add more items");this.storage.push(t)}pop(){return this.storage.pop()}peek(){return this.storage[this.size()-1]}size(){return this.storage.length}moveToTop(t){const n=this.storage.indexOf(t);n>-1&&(this.storage.splice(n,1),this.storage.push(t))}getIndexOf(t){for(let n=0;n<this.storage.length;n++)if(this.storage[n]===t)return n;return-1}}function pt(o){let t,n,e,a,l,c,i,r,u,h;return l=new Y({props:{windowState:o[0],frameElement:null,stack:o[3]}}),i=new Y({props:{windowState:o[1],frameElement:null,stack:o[3]}}),u=new Y({props:{windowState:o[2],frameElement:null,stack:o[3]}}),{c(){t=v("div"),n=v("div"),e=T(),a=v("div"),F(l.$$.fragment),c=T(),F(i.$$.fragment),r=T(),F(u.$$.fragment),this.h()},l(d){t=k(d,"DIV",{class:!0});var g=z(t);n=k(g,"DIV",{class:!0,style:!0}),z(n).forEach(p),e=D(g),a=k(g,"DIV",{});var x=z(a);X(l.$$.fragment,x),c=D(x),X(i.$$.fragment,x),r=D(x),X(u.$$.fragment,x),x.forEach(p),g.forEach(p),this.h()},h(){y(n,"class","-z-[100] fixed top-0 left-0 w-full h-full"),C(n,"background-image","url('"+mt+"/bg.png')"),C(n,"background-size","cover"),C(n,"background-position","center"),C(n,"height","100vh"),C(n,"width","100vw"),y(t,"class","h-screen w-screen select-none overflow-hidden")},m(d,g){H(d,t,g),m(t,n),m(t,e),m(t,a),q(l,a,null),m(a,c),q(i,a,null),m(a,r),q(u,a,null),h=!0},p:ut,i(d){h||(I(l.$$.fragment,d),I(i.$$.fragment,d),I(u.$$.fragment,d),h=!0)},o(d){N(l.$$.fragment,d),N(i.$$.fragment,d),N(u.$$.fragment,d),h=!1},d(d){d&&p(t),M(l),M(i),M(u)}}}function yt(o,t,n){let a=new A(720,480,600,300,1,"normal","Testing"),l=new A(720,480,300,100,2,"normal","Testing"),c=new A(720,480,100,100,3,"normal","Testing"),i=new wt;return i.push(a),i.push(l),i.push(c),ht("stackCtx",i),[a,l,c,i,!0]}class bt extends Z{constructor(t){super(),Q(this,t,yt,pt,R,{prerender:4})}get prerender(){return this.$$.ctx[4]}}export{bt as default};
